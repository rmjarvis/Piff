<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reading in Files &mdash; Piff 1.6.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=72d88caf"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Selecting Good PSF Stars" href="select.html" />
    <link rel="prev" title="The piffify executable" href="piffify.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Piff
          </a>
              <div class="version">
                1.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">PIFF: PSFs In the Full FOV</a></li>
<li class="toctree-l1"><a class="reference internal" href="piffify.html">The piffify executable</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reading in Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#piff.Input"><code class="docutils literal notranslate"><span class="pre">Input</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#piff.Input.getPointing"><code class="docutils literal notranslate"><span class="pre">Input.getPointing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#piff.Input.getWCS"><code class="docutils literal notranslate"><span class="pre">Input.getWCS()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#piff.Input.makeStars"><code class="docutils literal notranslate"><span class="pre">Input.makeStars()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#piff.Input.process"><code class="docutils literal notranslate"><span class="pre">Input.process()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#piff.InputFiles"><code class="docutils literal notranslate"><span class="pre">InputFiles</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#piff.InputFiles.load_images"><code class="docutils literal notranslate"><span class="pre">InputFiles.load_images()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#piff.InputFiles.readImage"><code class="docutils literal notranslate"><span class="pre">InputFiles.readImage()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#piff.InputFiles.readStarCatalog"><code class="docutils literal notranslate"><span class="pre">InputFiles.readStarCatalog()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#piff.InputFiles.setPointing"><code class="docutils literal notranslate"><span class="pre">InputFiles.setPointing()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="select.html">Selecting Good PSF Stars</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="interp.html">Interpolation Schemes</a></li>
<li class="toctree-l1"><a class="reference internal" href="psf.html">PSF classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="outliers.html">Removing Outliers</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Writing the output file</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Output statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="star.html">Stars</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Utility Functions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Piff</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Reading in Files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/input.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="reading-in-files">
<h1>Reading in Files<a class="headerlink" href="#reading-in-files" title="Link to this heading"></a></h1>
<p>Input handlers govern how the observational data is read in. This includes both images
and catalogs.  The class <a class="reference internal" href="#piff.InputFiles" title="piff.InputFiles"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputFiles</span></code></a> is the default, so if you are using
that (which is typical), you can omit the :type: specification.</p>
<dl class="py class">
<dt class="sig sig-object py" id="piff.Input">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">piff.</span></span><span class="sig-name descname"><span class="pre">Input</span></span><a class="reference internal" href="_modules/piff/input.html#Input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.Input" title="Link to this definition"></a></dt>
<dd><p>The base class for handling inputs for building a Piff model.</p>
<p>This is essentially an abstract base class intended to define the methods that should be
implemented by any derived class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="piff.Input.getPointing">
<span class="sig-name descname"><span class="pre">getPointing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#Input.getPointing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.Input.getPointing" title="Link to this definition"></a></dt>
<dd><p>Get the pointing coordinate of the (noinal) center of the field of view.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>logger</strong> – A logger object for logging debug info. [default: None]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a galsim.CelestialCoord of the pointing direction.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="piff.Input.getWCS">
<span class="sig-name descname"><span class="pre">getWCS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#Input.getWCS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.Input.getWCS" title="Link to this definition"></a></dt>
<dd><p>Get the WCS solutions for all the chips in the field of view.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>logger</strong> – A logger object for logging debug info. [default: None]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict of WCS solutions (galsim.BaseWCS instances) indexed by chipnum</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="piff.Input.makeStars">
<span class="sig-name descname"><span class="pre">makeStars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#Input.makeStars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.Input.makeStars" title="Link to this definition"></a></dt>
<dd><p>Process the input images and star data, cutting out stamps for each star along with
other relevant information.</p>
<p>The base class implementation expects the derived class to have appropriately set the
following attributes:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">stamp_size<span class="colon">:</span></dt>
<dd class="field-odd"><p>The size of the postage stamp to use for the cutouts</p>
</dd>
<dt class="field-even">x_col<span class="colon">:</span></dt>
<dd class="field-even"><p>The name of the column in the catalogs to use for the x position.</p>
</dd>
<dt class="field-odd">y_col<span class="colon">:</span></dt>
<dd class="field-odd"><p>The name of the column in the catalogs to use for the y position.</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>logger</strong> – A logger object for logging debug info. [default: None]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of Star instances</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="piff.Input.process">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#Input.process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.Input.process" title="Link to this definition"></a></dt>
<dd><p>Parse the input field of the config dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_input</strong> – The configuration dict.</p></li>
<li><p><strong>logger</strong> – A logger object for logging debug info. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>stars, wcs, pointing</p>
</dd>
</dl>
<p>stars is a list of Star instances with the initial data.
wcs is a dict of WCS solutions indexed by chipnum.
pointing is either a galsim.CelestialCoord or None.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="piff.InputFiles">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">piff.</span></span><span class="sig-name descname"><span class="pre">InputFiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#InputFiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.InputFiles" title="Link to this definition"></a></dt>
<dd><p>An Input handler that just takes a list of image files and catalog files.</p>
<p>Parse the input config dict (Normally the ‘input’ field in the overall configuration dict).</p>
<p>The two required fields in the input dict are:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">image_file_name<span class="colon">:</span></dt>
<dd class="field-odd"><p>The file name(s) of the input image(s).</p>
</dd>
<dt class="field-even">cat_file_name<span class="colon">:</span></dt>
<dd class="field-even"><p>The file name(s) of the input catalog(s).</p>
</dd>
</dl>
</div></blockquote>
<p>There are a number of ways to specify these file names.</p>
<ol class="arabic">
<li><p>A string giving a single file name.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">image_file_name</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">fits</span>
<span class="n">cat_file_name</span><span class="p">:</span> <span class="n">input_cat</span><span class="o">.</span><span class="n">fits</span>
</pre></div>
</div>
</li>
<li><p>A list of several file names.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">image_file_name</span><span class="p">:</span> <span class="p">[</span><span class="n">image_00</span><span class="o">.</span><span class="n">fits</span><span class="p">,</span> <span class="n">image_01</span><span class="o">.</span><span class="n">fits</span><span class="p">,</span> <span class="n">image_02</span><span class="o">.</span><span class="n">fits</span><span class="p">]</span>
<span class="n">cat_file_name</span><span class="p">:</span> <span class="p">[</span><span class="n">input_cat_00</span><span class="o">.</span><span class="n">fits</span><span class="p">,</span> <span class="n">input_cat_01</span><span class="o">.</span><span class="n">fits</span><span class="p">,</span> <span class="n">input_cat_02</span><span class="o">.</span><span class="n">fits</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>A string that glob can recognize to list several file names.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">image_file_name</span><span class="p">:</span> <span class="n">image_</span><span class="o">*.</span><span class="n">fits</span>
<span class="n">cat_file_name</span><span class="p">:</span> <span class="n">input_cat_</span><span class="o">*.</span><span class="n">fits</span>
</pre></div>
</div>
</li>
<li><p>A dict parseable as a string value according to the GalSim configuration parsing types.
In this case, you also must specify nimages to say how many file names to generate
in this way.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    nimages: 20
    image_file_name:
        type: FormattedStr
        format: image_%03d_%02d.fits.fz
        items:
            - { type : Sequence, first: 0, repeat: 4 }  # Exposure number
            - { type : Sequence, first: 1, last: 4 }    # Chip number
    cat_file_name:
        type: Eval
        str: &quot;image_file_name.replace(&#39;image&#39;,&#39;input_cat&#39;)&quot;
        simage_file_name: &#39;@input.image_file_name&#39;

See the description of the GalSim config parser for more details about the various
types that are valid here.

    `https://github.com/GalSim-developers/GalSim/wiki/Config-Values`_
</pre></div>
</div>
</li>
</ol>
<p>There are many other optional parameters, which help govern how the input files are
read or interpreted:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">chipnum<span class="colon">:</span></dt>
<dd class="field-odd"><p>The id number of this chip used to reference this image [default:
image_num]</p>
</dd>
<dt class="field-even">image_hdu<span class="colon">:</span></dt>
<dd class="field-even"><p>The hdu to use in the image files. [default: None, which means use
either 0 or 1 as typical given the compression sceme of the file]</p>
</dd>
<dt class="field-odd">weight_hdu<span class="colon">:</span></dt>
<dd class="field-odd"><p>The hdu to use for weight images. [default: None, which means a weight
image with all 1’s will be automatically created]</p>
</dd>
<dt class="field-even">badpix_hdu<span class="colon">:</span></dt>
<dd class="field-even"><p>The hdu to use for badpix images. Pixels with badpix != 0 will be given
weight == 0. [default: None]</p>
</dd>
<dt class="field-odd">noise<span class="colon">:</span></dt>
<dd class="field-odd"><p>Rather than a weight image, provide the noise variance in the image.
(Useful for simulations where this is a known value.) [default: None]</p>
</dd>
<dt class="field-even">weight_file_name<span class="colon">:</span></dt>
<dd class="field-even"><p>If the weight image is in a different file than the main image,
this gives the name of the file to use. [default: None]</p>
</dd>
<dt class="field-odd">badpix_file_name<span class="colon">:</span></dt>
<dd class="field-odd"><p>If the badpix image is in a different file than the main image,
this gives the name of the file to use. [default: None]</p>
</dd>
<dt class="field-even">cat_hdu<span class="colon">:</span></dt>
<dd class="field-even"><p>The hdu to use in the catalog files. [default: 1]</p>
</dd>
<dt class="field-odd">x_col<span class="colon">:</span></dt>
<dd class="field-odd"><p>The name of the X column in the input catalogs. [default: ‘x’]</p>
</dd>
<dt class="field-even">y_col<span class="colon">:</span></dt>
<dd class="field-even"><p>The name of the Y column in the input catalogs. [default: ‘y’]</p>
</dd>
<dt class="field-odd">ra_col<span class="colon">:</span></dt>
<dd class="field-odd"><p>(Alternative to x_col, y_col) The name of a right ascension column in
the input catalogs.  Will use the WCS to find (x,y) [default: None]</p>
</dd>
<dt class="field-even">dec_col<span class="colon">:</span></dt>
<dd class="field-even"><p>(Alternative to x_col, y_col) The name of a declination column in
the input catalogs.  Will use the WCS to find (x,y) [default: None]</p>
</dd>
<dt class="field-odd">flag_col<span class="colon">:</span></dt>
<dd class="field-odd"><p>The name of a flag column in the input catalogs. [default: None]
By default, this will skip any objects with flag != 0, but see
skip_flag and use_flag for other possible meanings for how the
flag column can be used to select stars.</p>
</dd>
<dt class="field-even">skip_flag<span class="colon">:</span></dt>
<dd class="field-even"><p>The flag indicating which items to not use. [default: -1]
Items with flag &amp; skip_flag != 0 will be skipped.</p>
</dd>
<dt class="field-odd">use_flag<span class="colon">:</span></dt>
<dd class="field-odd"><p>The flag indicating which items to use. [default: None]
Items with flag &amp; use_flag == 0 will be skipped.</p>
</dd>
<dt class="field-even">property_cols<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of column names of star properties (e.g. star colors).
[default: None]</p>
</dd>
<dt class="field-odd">sky_col<span class="colon">:</span></dt>
<dd class="field-odd"><p>The name of a column with sky values. [default: None]</p>
</dd>
<dt class="field-even">gain_col<span class="colon">:</span></dt>
<dd class="field-even"><p>The name of a column with gain values. [default: None]</p>
</dd>
<dt class="field-odd">sky<span class="colon">:</span></dt>
<dd class="field-odd"><p>The sky level to subtract from the image values. [default: None]
Note: It is an error to specify both sky and sky_col. If both are None,
no sky level will be subtracted off.</p>
</dd>
<dt class="field-even">gain<span class="colon">:</span></dt>
<dd class="field-even"><p>The gain to use for adding Poisson noise to the weight map.  [default:
None] It is an error for both gain and gain_col to be specified.
If both are None, then no additional noise will be added to account
for the Poisson noise from the galaxy flux.</p>
</dd>
<dt class="field-odd">satur<span class="colon">:</span></dt>
<dd class="field-odd"><p>The staturation level.  If any pixels for a star exceed this, then
the star is skipped. [default: None]</p>
</dd>
<dt class="field-even">trust_pos<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether to trust the input position as essentially exact (True), or to
let the stars move slightly from their nominal positions (False).
[default: False]</p>
</dd>
<dt class="field-odd">use_partial<span class="colon">:</span></dt>
<dd class="field-odd"><p>Whether to use stars whose postage stamps are only partially on the
full image.  [default: False]</p>
</dd>
<dt class="field-even">nstars<span class="colon">:</span></dt>
<dd class="field-even"><p>Stop reading the input file at this many stars.  (This is applied
separately to each input catalog.)  [default: None]</p>
</dd>
<dt class="field-odd">nproc<span class="colon">:</span></dt>
<dd class="field-odd"><p>How many multiprocessing processes to use for reading in data from
multiple files at once. [default: 1]</p>
</dd>
<dt class="field-even">wcs<span class="colon">:</span></dt>
<dd class="field-even"><p>Normally, the wcs is automatically read in when reading the image.
However, this parameter allows you to optionally provide a different
WCS.  It should be defined using the same style as a wcs object
in GalSim config files. [defulat: None]</p>
</dd>
</dl>
</div></blockquote>
<p>The above values are parsed separately for each input image/catalog.  In addition, there
are a couple other parameters that are just parsed once:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">stamp_size<span class="colon">:</span></dt>
<dd class="field-odd"><p>The size of the postage stamps to use for the cutouts.  Note: some
stamps may be smaller than this if the star is near a chip boundary.
[default: 32]</p>
</dd>
<dt class="field-even">ra, dec<span class="colon">:</span></dt>
<dd class="field-even"><p>The RA, Dec of the telescope pointing. [default: None; See
<a class="reference internal" href="#piff.InputFiles.setPointing" title="piff.InputFiles.setPointing"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">setPointing</span></code></a> for details about how this can be specified]</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – The configuration dict used to define the above parameters.</p></li>
<li><p><strong>logger</strong> – A logger object for logging debug info. [default: None]</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="piff.InputFiles.load_images">
<span class="sig-name descname"><span class="pre">load_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#InputFiles.load_images"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.InputFiles.load_images" title="Link to this definition"></a></dt>
<dd><p>Load the image data into a list of Stars.</p>
<p>We don’t store the image data for Stars when we write them to a file, since that
would take up a lot of space and is usually not desired.  However, we do store the
bounds in the original image where the star was cutout, so if you want to load back in
the original data from the image file(s), you can do so with this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stars</strong> – A list of Star instances.</p></li>
<li><p><strong>logger</strong> – A logger object for logging debug info. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a new list of Stars with the images information loaded.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="piff.InputFiles.readImage">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">readImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_hdu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_hdu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">badpix_file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">badpix_hdu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sky_file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sky_hdu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#InputFiles.readImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.InputFiles.readImage" title="Link to this definition"></a></dt>
<dd><p>Read in the image and weight map (or make one if no weight information is given</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_file_name</strong> – The name of the file to read.</p></li>
<li><p><strong>image_hdu</strong> – The hdu of the main image.</p></li>
<li><p><strong>weight_file_name</strong> – The name if the file with the weight image (if any).</p></li>
<li><p><strong>weight_hdu</strong> – The hdu of the weight image (if any).</p></li>
<li><p><strong>badpix_file_name</strong> – The name of the file with the bad pixel mask (if any).</p></li>
<li><p><strong>badpix_hdu</strong> – The hdu of the bad pixel mask (if any).</p></li>
<li><p><strong>sky_file_name</strong> – A file to use for a sky background to subtract from the image
(if any).</p></li>
<li><p><strong>sky_hdu</strong> – The hdu to use in the sky_file_name (if any).</p></li>
<li><p><strong>noise</strong> – A constant noise value to use in lieu of a weight map.</p></li>
<li><p><strong>logger</strong> – A logger object for logging debug info.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>image, weight</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="piff.InputFiles.readStarCatalog">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">readStarCatalog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cat_file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cat_hdu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra_units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_flag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_flag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">property_cols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sky_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sky</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">satur</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trust_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nstars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stamp_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#InputFiles.readStarCatalog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.InputFiles.readStarCatalog" title="Link to this definition"></a></dt>
<dd><p>Read in the star catalogs and return lists of positions for each star in each image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cat_file_name</strong> – The name of the catalog file to read in.</p></li>
<li><p><strong>cat_hdu</strong> – The hdu to use.</p></li>
<li><p><strong>x_col</strong> – The name of the column with x values.</p></li>
<li><p><strong>y_col</strong> – The name of the column with y values.</p></li>
<li><p><strong>ra_col</strong> – The name of a column with RA values.</p></li>
<li><p><strong>dec_col</strong> – The name of a column with Dec values.</p></li>
<li><p><strong>ra_units</strong> – The units of the ra column.</p></li>
<li><p><strong>dec_units</strong> – The units of the dec column.</p></li>
<li><p><strong>image</strong> – The image that was already read in (mostly for the wcs).</p></li>
<li><p><strong>flag_col</strong> – The name of a column with flag values.</p></li>
<li><p><strong>skip_flag</strong> – The flag indicating which items to not use. [default: -1]
Items with flag &amp; skip_flag != 0 will be skipped.</p></li>
<li><p><strong>use_flag</strong> – The flag indicating which items to use. [default: None]
Items with flag &amp; use_flag == 0 will be skipped.</p></li>
<li><p><strong>property_cols</strong> – A list of column names with star properties (e.g. star colors).</p></li>
<li><p><strong>sky_col</strong> – A column with sky (background) levels.</p></li>
<li><p><strong>gain_col</strong> – A column with gain values.</p></li>
<li><p><strong>sky</strong> – Either a float value for the sky to use for all objects or a str
keyword to read a value from the FITS header.</p></li>
<li><p><strong>gain</strong> – Either a float value for the gain to use for all objects or a str
keyword to read a value from the FITS header.</p></li>
<li><p><strong>satur</strong> – Either a float value for the saturation level to use or a str
keyword to read a value from the FITS header.</p></li>
<li><p><strong>trust_pos</strong> – Optional bool value indicating whether to trust input positions.</p></li>
<li><p><strong>nstars</strong> – Optionally a maximum number of stars to use.</p></li>
<li><p><strong>image_file_name</strong> – The image file name in case needed for header values.</p></li>
<li><p><strong>stamp_size</strong> – The stamp size being used for the star stamps.</p></li>
<li><p><strong>logger</strong> – A logger object for logging debug info. [default: None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>lists image_pos, extra_props</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="piff.InputFiles.setPointing">
<span class="sig-name descname"><span class="pre">setPointing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piff/input.html#InputFiles.setPointing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#piff.InputFiles.setPointing" title="Link to this definition"></a></dt>
<dd><p>Set the pointing attribute based on the input ra, dec (given in the initializer)</p>
<p>There are a number of ways the pointing can be specified.
Even this is probably not sufficiently generic for all applications, but it’s a start.</p>
<ol class="arabic simple">
<li><p>numerical values (in Hours, Degrees respective) for ra, dec</p></li>
<li><p>hh:mm:ss.ssss, dd:mm:ss.ssss strings giving hours/degrees, minutes, seconds for each</p></li>
<li><p>FITS header key words to read to get the ra, dec values</p></li>
<li><p>None, which will attempt to find the spatial center of all the input images using the
midpoint of the min/max ra and dec values of the image corners according to their
individual WCS functions. [Not implemented currently.]</p></li>
</ol>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="piffify.html" class="btn btn-neutral float-left" title="The piffify executable" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="select.html" class="btn btn-neutral float-right" title="Selecting Good PSF Stars" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>